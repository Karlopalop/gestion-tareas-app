<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>📊 Dashboard</h1>
    <button class="btn btn-refresh" (click)="recargar()" [disabled]="isLoading">
      🔄 {{ isLoading ? 'Cargando...' : 'Actualizar' }}
    </button>
  </div>

  <!-- Mensaje de error -->
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="loading">
    <p>Cargando dashboard...</p>
  </div>

  <!-- Contenido principal -->
  <div *ngIf="!isLoading" class="dashboard-content">
    
    <!-- Tarjetas de estadísticas -->
    <div class="stats-grid">
      <div class="stat-card total">
        <div class="stat-icon">📋</div>
        <div class="stat-info">
          <h3>Total Tareas</h3>
          <span class="stat-number">{{ totalTareas }}</span>
        </div>
      </div>

      <div class="stat-card pending">
        <div class="stat-icon">⏳</div>
        <div class="stat-info">
          <h3>Pendientes</h3>
          <span class="stat-number">{{ tareasPendientes }}</span>
        </div>
      </div>

      <div class="stat-card completed">
        <div class="stat-icon">✅</div>
        <div class="stat-info">
          <h3>Completadas</h3>
          <span class="stat-number">{{ tareasCompletadas }}</span>
          <span class="stat-percentage">({{ getPorcentajeCompletadas() }}%)</span>
        </div>
      </div>

      <div class="stat-card upcoming">
        <div class="stat-icon">📅</div>
        <div class="stat-info">
          <h3>Próximas</h3>
          <span class="stat-number">{{ tareasProximas }}</span>
        </div>
      </div>
    </div>

    <!-- Barra de progreso -->
    <div class="progress-section">
      <h3>Progreso General</h3>
      <div class="progress-bar">
        <div 
          class="progress-fill" 
          [style.width.%]="getPorcentajeCompletadas()">
        </div>
      </div>
      <span class="progress-text">{{ getPorcentajeCompletadas() }}% completado</span>
    </div>

    <!-- Sección de tareas recientes -->
    <div class="recent-tasks">
      <div class="section-header">
        <h3>📝 Tareas Recientes</h3>
        <a routerLink="/tareas" class="view-all">Ver todas →</a>
      </div>
      
      <div *ngIf="tareasRecientes.length === 0" class="empty-state">
        <p>No hay tareas recientes</p>
        <a routerLink="/tareas" class="btn btn-primary">Crear primera tarea</a>
      </div>

      <div *ngIf="tareasRecientes.length > 0" class="tasks-list">
        <div *ngFor="let tarea of tareasRecientes" class="task-item">
          <div class="task-main">
            <span class="task-title" [class.completed]="tarea.completada">
              {{ tarea.titulo }}
            </span>
            <span class="task-priority" [class]="'priority-' + tarea.prioridad.toLowerCase()">
              {{ tarea.prioridad }}
            </span>
          </div>
          <div class="task-meta">
            <span class="task-date">
              📅 {{ tarea.fechaVencimiento || 'Sin fecha' }}
            </span>
            <span class="task-status" [class.completed]="tarea.completada">
              {{ tarea.completada ? '✅ Completada' : '⏳ Pendiente' }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Acciones rápidas -->
    <div class="quick-actions">
      <h3>🚀 Acciones Rápidas</h3>
      <div class="actions-grid">
        <a routerLink="/tareas" class="action-card">
          <div class="action-icon">➕</div>
          <span>Nueva Tarea</span>
        </a>
        <a routerLink="/tareas" class="action-card">
          <div class="action-icon">📋</div>
          <span>Ver Todas</span>
        </a>
        <div class="action-card" (click)="recargar()">
          <div class="action-icon">🔄</div>
          <span>Actualizar</span>
        </div>
      </div>
    </div>
  </div>
</div>