<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="header-content">
      <h1 class="dashboard-title">ğŸ“Š Dashboard</h1>
      <p class="dashboard-subtitle">Resumen de tu productividad</p>
    </div>
    <button class="refresh-btn" (click)="recargar()" [disabled]="isLoading">
      <span class="refresh-icon" [class.spinning]="isLoading">ğŸ”„</span>
      <span class="refresh-text">{{ isLoading ? 'Actualizando...' : 'Actualizar' }}</span>
    </button>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-banner">
    <span class="error-icon">âš ï¸</span>
    {{ errorMessage }}
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loading-spinner"></div>
    <p>Cargando dashboard...</p>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoading" class="dashboard-content">
    
    <!-- Statistics Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-background total-bg"></div>
        <div class="stat-content">
          <div class="stat-icon">ğŸ“‹</div>
          <div class="stat-info">
            <h3 class="stat-title">Total Tareas</h3>
            <span class="stat-number">{{ totalTareas }}</span>
            <span class="stat-trend">Todas las actividades</span>
          </div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-background pending-bg"></div>
        <div class="stat-content">
          <div class="stat-icon">â³</div>
          <div class="stat-info">
            <h3 class="stat-title">Pendientes</h3>
            <span class="stat-number">{{ tareasPendientes }}</span>
            <span class="stat-trend">Por completar</span>
          </div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-background completed-bg"></div>
        <div class="stat-content">
          <div class="stat-icon">âœ…</div>
          <div class="stat-info">
            <h3 class="stat-title">Completadas</h3>
            <span class="stat-number">{{ tareasCompletadas }}</span>
            <div class="stat-details">
              <span class="stat-percentage">{{ getPorcentajeCompletadas() }}%</span>
              <span class="stat-label">del total</span>
            </div>
          </div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-background upcoming-bg"></div>
        <div class="stat-content">
          <div class="stat-icon">ğŸ“…</div>
          <div class="stat-info">
            <h3 class="stat-title">PrÃ³ximas</h3>
            <span class="stat-number">{{ tareasProximas }}</span>
            <span class="stat-trend">Vencen pronto</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Progress Section -->
    <div class="progress-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ“ˆ Progreso General</h2>
        <span class="progress-percentage">{{ getPorcentajeCompletadas() }}%</span>
      </div>
      <div class="progress-container">
        <div class="progress-bar">
          <div 
            class="progress-fill" 
            [style.width.%]="getPorcentajeCompletadas()">
            <div class="progress-glow"></div>
          </div>
        </div>
        <div class="progress-labels">
          <span>0%</span>
          <span>50%</span>
          <span>100%</span>
        </div>
      </div>
    </div>

    <!-- Recent Tasks & Quick Actions -->
    <div class="actions-grid">
      <!-- Recent Tasks -->
      <div class="recent-tasks">
        <div class="section-header">
          <h2 class="section-title">ğŸ“ Tareas Recientes</h2>
          <a routerLink="/tareas" class="view-all-link">
            Ver todas
            <span class="link-arrow">â†’</span>
          </a>
        </div>
        
        <div *ngIf="tareasRecientes.length === 0" class="empty-state">
          <div class="empty-icon">ğŸ“­</div>
          <h3>No hay tareas recientes</h3>
          <p>Crea tu primera tarea para comenzar</p>
          <a routerLink="/tareas" class="action-button">
            <span class="button-icon">â•</span>
            Crear Tarea
          </a>
        </div>

        <div *ngIf="tareasRecientes.length > 0" class="tasks-list">
          <div *ngFor="let tarea of tareasRecientes" class="task-item" [class.completed]="tarea.completada">
            <div class="task-checkbox">
              <div class="checkbox" [class.checked]="tarea.completada"></div>
            </div>
            <div class="task-content">
              <div class="task-header">
                <h4 class="task-title" [class.completed]="tarea.completada">{{ tarea.titulo }}</h4>
                <span class="task-priority" [class]="'priority-' + tarea.prioridad.toLowerCase()">
                  {{ tarea.prioridad }}
                </span>
              </div>
              <div class="task-meta">
                <span class="task-date">
                  <span class="meta-icon">ğŸ“…</span>
                  {{ tarea.fechaVencimiento || 'Sin fecha' }}
                </span>
                <span class="task-status" [class.completed]="tarea.completada">
                  {{ tarea.completada ? 'âœ… Completada' : 'â³ Pendiente' }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <h2 class="section-title">ğŸš€ Acciones RÃ¡pidas</h2>
        <div class="actions-list">
          <a routerLink="/tareas" class="action-item new-task">
            <div class="action-icon">â•</div>
            <div class="action-content">
              <h3>Nueva Tarea</h3>
              <p>Crea una nueva tarea</p>
            </div>
            <span class="action-arrow">â†’</span>
          </a>

          <a routerLink="/tareas" class="action-item view-all">
            <div class="action-icon">ğŸ“‹</div>
            <div class="action-content">
              <h3>Ver Todas</h3>
              <p>Gestiona todas las tareas</p>
            </div>
            <span class="action-arrow">â†’</span>
          </a>

          <div class="action-item refresh" (click)="recargar()">
            <div class="action-icon">ğŸ”„</div>
            <div class="action-content">
              <h3>Actualizar</h3>
              <p>Actualizar datos</p>
            </div>
            <span class="action-arrow">â†»</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>